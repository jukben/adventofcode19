import {
  parseInstruction,
  run,
  maxThruster,
  maxThrusterWithFeedbackLoop
} from "./9";

test("#parseInstruction", () => {
  expect(parseInstruction("1002")).toEqual({
    code: "02",
    argModes: [0, 1, 0]
  });

  expect(parseInstruction("11005")).toEqual({
    code: "05",
    argModes: [0, 1, 1]
  });

  expect(parseInstruction("99")).toEqual({
    code: "99",
    argModes: [0, 0, 0]
  });

  expect(parseInstruction("11101")).toEqual({
    code: "01",
    argModes: [1, 1, 1]
  });

  expect(parseInstruction("10001")).toEqual({
    code: "01",
    argModes: [0, 0, 1]
  });
});

test("#run", () => {
  expect(run([1002, 4, 3, 4, 33], []).program).toEqual([
    "1002",
    "4",
    "3",
    "4",
    "99"
  ]);
  expect(run([1002, 4, -3, 4, 33], []).program).toEqual([
    "1002",
    "4",
    "-3",
    "4",
    "-99"
  ]);
  expect(run([1101, 100, -1, 4, 0], []).program).toEqual([
    "1101",
    "100",
    "-1",
    "4",
    "99"
  ]);
});

test("#run; position - equal", () => {
  const { program, outputs } = run([3, 9, 8, 9, 10, 9, 4, 9, 99, -1, 8], [8]);
  expect(outputs).toEqual([1]);
  expect(program).toMatchInlineSnapshot(`
    Array [
      "3",
      "9",
      "8",
      "9",
      "10",
      "9",
      "4",
      "9",
      "99",
      "1",
      "8",
    ]
  `);
});

test("#run; immediate mode - equal", () => {
  const { program, outputs } = run([3, 3, 1108, -1, 8, 3, 4, 3, 99], [8]);
  expect(outputs).toEqual([1]);
  expect(program).toMatchInlineSnapshot(`
    Array [
      "3",
      "3",
      "1108",
      "1",
      "8",
      "3",
      "4",
      "3",
      "99",
    ]
  `);
});

test("#run; position mode - less than", () => {
  const { program, outputs } = run([3, 9, 7, 9, 10, 9, 4, 9, 99, -1, 8], [8]);
  expect(outputs).toEqual([0]);
  expect(program).toMatchInlineSnapshot(`
    Array [
      "3",
      "9",
      "7",
      "9",
      "10",
      "9",
      "4",
      "9",
      "99",
      "0",
      "8",
    ]
  `);
});

test("#run; immediate mode - less than", () => {
  const { program, outputs } = run([3, 3, 1107, -1, 8, 3, 4, 3, 99], [8]);
  expect(outputs).toEqual([0]);
  expect(program).toMatchInlineSnapshot(`
    Array [
      "3",
      "3",
      "1107",
      "0",
      "8",
      "3",
      "4",
      "3",
      "99",
    ]
  `);
});

test("#run; position mode - jump", () => {
  const { program, outputs } = run(
    [3, 12, 6, 12, 15, 1, 13, 14, 13, 4, 13, 99, -1, 0, 1, 9],
    [1]
  );

  expect(outputs).toEqual([1]);
  expect(program).toMatchInlineSnapshot(`
    Array [
      "3",
      "12",
      "6",
      "12",
      "15",
      "1",
      "13",
      "14",
      "13",
      "4",
      "13",
      "99",
      "1",
      "1",
      "1",
      "9",
    ]
  `);
});

test("#run; position mode - jump", () => {
  const { program, outputs } = run([1006, 0, 2, 99], [1]);

  expect(outputs).toEqual([]);
  expect(program).toMatchInlineSnapshot(`
    Array [
      "1006",
      "0",
      "2",
      "99",
    ]
  `);
});

test("#run; immediate mode - jump", () => {
  const { program, outputs } = run(
    [3, 3, 1105, -1, 9, 1101, 0, 0, 12, 4, 12, 99, 1],
    [1]
  );

  expect(outputs).toEqual([1]);

  expect(program).toMatchInlineSnapshot(`
    Array [
      "3",
      "3",
      "1105",
      "1",
      "9",
      "1101",
      "0",
      "0",
      "12",
      "4",
      "12",
      "99",
      "1",
    ]
  `);
});

test("more jumptests", () => {
  expect(
    run([3, 12, 6, 12, 15, 1, 13, 14, 13, 4, 13, 99, -1, 0, 1, 9], [0]).outputs
  ).toEqual([0]);
  expect(
    run([3, 12, 6, 12, 15, 1, 13, 14, 13, 4, 13, 99, -1, 0, 1, 9], [1212])
      .outputs
  ).toEqual([1]);
});

test("#run; day 5 1/2", () => {
  const { outputs } = run(
    [
      3,
      225,
      1,
      225,
      6,
      6,
      1100,
      1,
      238,
      225,
      104,
      0,
      1002,
      92,
      42,
      224,
      1001,
      224,
      -3444,
      224,
      4,
      224,
      102,
      8,
      223,
      223,
      101,
      4,
      224,
      224,
      1,
      224,
      223,
      223,
      1102,
      24,
      81,
      225,
      1101,
      89,
      36,
      224,
      101,
      -125,
      224,
      224,
      4,
      224,
      102,
      8,
      223,
      223,
      101,
      5,
      224,
      224,
      1,
      224,
      223,
      223,
      2,
      118,
      191,
      224,
      101,
      -880,
      224,
      224,
      4,
      224,
      1002,
      223,
      8,
      223,
      1001,
      224,
      7,
      224,
      1,
      224,
      223,
      223,
      1102,
      68,
      94,
      225,
      1101,
      85,
      91,
      225,
      1102,
      91,
      82,
      225,
      1102,
      85,
      77,
      224,
      101,
      -6545,
      224,
      224,
      4,
      224,
      1002,
      223,
      8,
      223,
      101,
      7,
      224,
      224,
      1,
      223,
      224,
      223,
      1101,
      84,
      20,
      225,
      102,
      41,
      36,
      224,
      101,
      -3321,
      224,
      224,
      4,
      224,
      1002,
      223,
      8,
      223,
      101,
      7,
      224,
      224,
      1,
      223,
      224,
      223,
      1,
      188,
      88,
      224,
      101,
      -183,
      224,
      224,
      4,
      224,
      1002,
      223,
      8,
      223,
      1001,
      224,
      7,
      224,
      1,
      224,
      223,
      223,
      1001,
      84,
      43,
      224,
      1001,
      224,
      -137,
      224,
      4,
      224,
      102,
      8,
      223,
      223,
      101,
      4,
      224,
      224,
      1,
      224,
      223,
      223,
      1102,
      71,
      92,
      225,
      1101,
      44,
      50,
      225,
      1102,
      29,
      47,
      225,
      101,
      7,
      195,
      224,
      101,
      -36,
      224,
      224,
      4,
      224,
      102,
      8,
      223,
      223,
      101,
      6,
      224,
      224,
      1,
      223,
      224,
      223,
      4,
      223,
      99,
      0,
      0,
      0,
      677,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      1105,
      0,
      99999,
      1105,
      227,
      247,
      1105,
      1,
      99999,
      1005,
      227,
      99999,
      1005,
      0,
      256,
      1105,
      1,
      99999,
      1106,
      227,
      99999,
      1106,
      0,
      265,
      1105,
      1,
      99999,
      1006,
      0,
      99999,
      1006,
      227,
      274,
      1105,
      1,
      99999,
      1105,
      1,
      280,
      1105,
      1,
      99999,
      1,
      225,
      225,
      225,
      1101,
      294,
      0,
      0,
      105,
      1,
      0,
      1105,
      1,
      99999,
      1106,
      0,
      300,
      1105,
      1,
      99999,
      1,
      225,
      225,
      225,
      1101,
      314,
      0,
      0,
      106,
      0,
      0,
      1105,
      1,
      99999,
      107,
      677,
      677,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      329,
      1001,
      223,
      1,
      223,
      1108,
      226,
      677,
      224,
      102,
      2,
      223,
      223,
      1006,
      224,
      344,
      101,
      1,
      223,
      223,
      1107,
      226,
      226,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      359,
      101,
      1,
      223,
      223,
      8,
      677,
      226,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      374,
      1001,
      223,
      1,
      223,
      1107,
      677,
      226,
      224,
      102,
      2,
      223,
      223,
      1005,
      224,
      389,
      1001,
      223,
      1,
      223,
      1008,
      677,
      677,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      404,
      1001,
      223,
      1,
      223,
      108,
      677,
      677,
      224,
      102,
      2,
      223,
      223,
      1005,
      224,
      419,
      1001,
      223,
      1,
      223,
      1107,
      226,
      677,
      224,
      102,
      2,
      223,
      223,
      1006,
      224,
      434,
      101,
      1,
      223,
      223,
      1008,
      226,
      226,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      449,
      1001,
      223,
      1,
      223,
      107,
      226,
      226,
      224,
      102,
      2,
      223,
      223,
      1006,
      224,
      464,
      1001,
      223,
      1,
      223,
      1007,
      677,
      226,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      479,
      1001,
      223,
      1,
      223,
      1108,
      226,
      226,
      224,
      102,
      2,
      223,
      223,
      1006,
      224,
      494,
      1001,
      223,
      1,
      223,
      8,
      226,
      226,
      224,
      1002,
      223,
      2,
      223,
      1005,
      224,
      509,
      1001,
      223,
      1,
      223,
      7,
      226,
      677,
      224,
      102,
      2,
      223,
      223,
      1005,
      224,
      524,
      101,
      1,
      223,
      223,
      1008,
      677,
      226,
      224,
      102,
      2,
      223,
      223,
      1005,
      224,
      539,
      101,
      1,
      223,
      223,
      107,
      226,
      677,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      554,
      1001,
      223,
      1,
      223,
      1108,
      677,
      226,
      224,
      102,
      2,
      223,
      223,
      1005,
      224,
      569,
      101,
      1,
      223,
      223,
      108,
      226,
      226,
      224,
      1002,
      223,
      2,
      223,
      1005,
      224,
      584,
      1001,
      223,
      1,
      223,
      7,
      677,
      226,
      224,
      1002,
      223,
      2,
      223,
      1005,
      224,
      599,
      1001,
      223,
      1,
      223,
      108,
      226,
      677,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      614,
      101,
      1,
      223,
      223,
      1007,
      677,
      677,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      629,
      101,
      1,
      223,
      223,
      7,
      677,
      677,
      224,
      102,
      2,
      223,
      223,
      1005,
      224,
      644,
      101,
      1,
      223,
      223,
      1007,
      226,
      226,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      659,
      1001,
      223,
      1,
      223,
      8,
      226,
      677,
      224,
      102,
      2,
      223,
      223,
      1005,
      224,
      674,
      1001,
      223,
      1,
      223,
      4,
      223,
      99,
      226
    ],
    [5]
  );

  expect(outputs).toEqual([742621]);
});

test("#run; day 5 2/2", () => {
  const { outputs, status } = run(
    [
      3,
      225,
      1,
      225,
      6,
      6,
      1100,
      1,
      238,
      225,
      104,
      0,
      1002,
      92,
      42,
      224,
      1001,
      224,
      -3444,
      224,
      4,
      224,
      102,
      8,
      223,
      223,
      101,
      4,
      224,
      224,
      1,
      224,
      223,
      223,
      1102,
      24,
      81,
      225,
      1101,
      89,
      36,
      224,
      101,
      -125,
      224,
      224,
      4,
      224,
      102,
      8,
      223,
      223,
      101,
      5,
      224,
      224,
      1,
      224,
      223,
      223,
      2,
      118,
      191,
      224,
      101,
      -880,
      224,
      224,
      4,
      224,
      1002,
      223,
      8,
      223,
      1001,
      224,
      7,
      224,
      1,
      224,
      223,
      223,
      1102,
      68,
      94,
      225,
      1101,
      85,
      91,
      225,
      1102,
      91,
      82,
      225,
      1102,
      85,
      77,
      224,
      101,
      -6545,
      224,
      224,
      4,
      224,
      1002,
      223,
      8,
      223,
      101,
      7,
      224,
      224,
      1,
      223,
      224,
      223,
      1101,
      84,
      20,
      225,
      102,
      41,
      36,
      224,
      101,
      -3321,
      224,
      224,
      4,
      224,
      1002,
      223,
      8,
      223,
      101,
      7,
      224,
      224,
      1,
      223,
      224,
      223,
      1,
      188,
      88,
      224,
      101,
      -183,
      224,
      224,
      4,
      224,
      1002,
      223,
      8,
      223,
      1001,
      224,
      7,
      224,
      1,
      224,
      223,
      223,
      1001,
      84,
      43,
      224,
      1001,
      224,
      -137,
      224,
      4,
      224,
      102,
      8,
      223,
      223,
      101,
      4,
      224,
      224,
      1,
      224,
      223,
      223,
      1102,
      71,
      92,
      225,
      1101,
      44,
      50,
      225,
      1102,
      29,
      47,
      225,
      101,
      7,
      195,
      224,
      101,
      -36,
      224,
      224,
      4,
      224,
      102,
      8,
      223,
      223,
      101,
      6,
      224,
      224,
      1,
      223,
      224,
      223,
      4,
      223,
      99,
      0,
      0,
      0,
      677,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      1105,
      0,
      99999,
      1105,
      227,
      247,
      1105,
      1,
      99999,
      1005,
      227,
      99999,
      1005,
      0,
      256,
      1105,
      1,
      99999,
      1106,
      227,
      99999,
      1106,
      0,
      265,
      1105,
      1,
      99999,
      1006,
      0,
      99999,
      1006,
      227,
      274,
      1105,
      1,
      99999,
      1105,
      1,
      280,
      1105,
      1,
      99999,
      1,
      225,
      225,
      225,
      1101,
      294,
      0,
      0,
      105,
      1,
      0,
      1105,
      1,
      99999,
      1106,
      0,
      300,
      1105,
      1,
      99999,
      1,
      225,
      225,
      225,
      1101,
      314,
      0,
      0,
      106,
      0,
      0,
      1105,
      1,
      99999,
      107,
      677,
      677,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      329,
      1001,
      223,
      1,
      223,
      1108,
      226,
      677,
      224,
      102,
      2,
      223,
      223,
      1006,
      224,
      344,
      101,
      1,
      223,
      223,
      1107,
      226,
      226,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      359,
      101,
      1,
      223,
      223,
      8,
      677,
      226,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      374,
      1001,
      223,
      1,
      223,
      1107,
      677,
      226,
      224,
      102,
      2,
      223,
      223,
      1005,
      224,
      389,
      1001,
      223,
      1,
      223,
      1008,
      677,
      677,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      404,
      1001,
      223,
      1,
      223,
      108,
      677,
      677,
      224,
      102,
      2,
      223,
      223,
      1005,
      224,
      419,
      1001,
      223,
      1,
      223,
      1107,
      226,
      677,
      224,
      102,
      2,
      223,
      223,
      1006,
      224,
      434,
      101,
      1,
      223,
      223,
      1008,
      226,
      226,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      449,
      1001,
      223,
      1,
      223,
      107,
      226,
      226,
      224,
      102,
      2,
      223,
      223,
      1006,
      224,
      464,
      1001,
      223,
      1,
      223,
      1007,
      677,
      226,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      479,
      1001,
      223,
      1,
      223,
      1108,
      226,
      226,
      224,
      102,
      2,
      223,
      223,
      1006,
      224,
      494,
      1001,
      223,
      1,
      223,
      8,
      226,
      226,
      224,
      1002,
      223,
      2,
      223,
      1005,
      224,
      509,
      1001,
      223,
      1,
      223,
      7,
      226,
      677,
      224,
      102,
      2,
      223,
      223,
      1005,
      224,
      524,
      101,
      1,
      223,
      223,
      1008,
      677,
      226,
      224,
      102,
      2,
      223,
      223,
      1005,
      224,
      539,
      101,
      1,
      223,
      223,
      107,
      226,
      677,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      554,
      1001,
      223,
      1,
      223,
      1108,
      677,
      226,
      224,
      102,
      2,
      223,
      223,
      1005,
      224,
      569,
      101,
      1,
      223,
      223,
      108,
      226,
      226,
      224,
      1002,
      223,
      2,
      223,
      1005,
      224,
      584,
      1001,
      223,
      1,
      223,
      7,
      677,
      226,
      224,
      1002,
      223,
      2,
      223,
      1005,
      224,
      599,
      1001,
      223,
      1,
      223,
      108,
      226,
      677,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      614,
      101,
      1,
      223,
      223,
      1007,
      677,
      677,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      629,
      101,
      1,
      223,
      223,
      7,
      677,
      677,
      224,
      102,
      2,
      223,
      223,
      1005,
      224,
      644,
      101,
      1,
      223,
      223,
      1007,
      226,
      226,
      224,
      1002,
      223,
      2,
      223,
      1006,
      224,
      659,
      1001,
      223,
      1,
      223,
      8,
      226,
      677,
      224,
      102,
      2,
      223,
      223,
      1005,
      224,
      674,
      1001,
      223,
      1,
      223,
      4,
      223,
      99,
      226
    ],
    [1]
  );

  expect(outputs).toEqual([0, 0, 0, 0, 0, 0, 0, 0, 0, 9961446]);
  expect(status).toEqual(1);
});

test("#run - larger example", () => {
  const program = [
    3,
    21,
    1008,
    21,
    8,
    20,
    1005,
    20,
    22,
    107,
    8,
    21,
    20,
    1006,
    20,
    31,
    1106,
    0,
    36,
    98,
    0,
    0,
    1002,
    21,
    125,
    20,
    4,
    20,
    1105,
    1,
    46,
    104,
    999,
    1105,
    1,
    46,
    1101,
    1000,
    1,
    20,
    4,
    20,
    1105,
    1,
    46,
    98,
    99
  ];

  expect(run(program, [6]).outputs).toEqual([999]);
  expect(run(program, [8]).outputs).toEqual([1000]);
  expect(run(program, [9]).outputs).toEqual([1001]);
});

test("Max thruster should be 43210", () => {
  expect(
    maxThruster([
      3,
      15,
      3,
      16,
      1002,
      16,
      10,
      16,
      1,
      16,
      15,
      15,
      4,
      15,
      99,
      0,
      0
    ])
  ).toBe(43210);
});

test("Max thruster should be 54321", () => {
  expect(
    maxThruster([
      3,
      23,
      3,
      24,
      1002,
      24,
      10,
      24,
      1002,
      23,
      -1,
      23,
      101,
      5,
      23,
      23,
      1,
      24,
      23,
      23,
      4,
      23,
      99,
      0,
      0
    ])
  ).toBe(54321);
});

test("Max thruster should be 65210", () => {
  expect(
    maxThruster([
      3,
      31,
      3,
      32,
      1002,
      32,
      10,
      32,
      1001,
      31,
      -2,
      31,
      1007,
      31,
      0,
      33,
      1002,
      33,
      7,
      33,
      1,
      33,
      31,
      31,
      1,
      32,
      31,
      31,
      4,
      31,
      99,
      0,
      0,
      0
    ])
  ).toBe(65210);
});

test("Max thruster should be 437860", () => {
  expect(
    maxThruster([
      3,
      8,
      1001,
      8,
      10,
      8,
      105,
      1,
      0,
      0,
      21,
      46,
      55,
      72,
      85,
      110,
      191,
      272,
      353,
      434,
      99999,
      3,
      9,
      1002,
      9,
      5,
      9,
      1001,
      9,
      2,
      9,
      102,
      3,
      9,
      9,
      101,
      2,
      9,
      9,
      102,
      4,
      9,
      9,
      4,
      9,
      99,
      3,
      9,
      102,
      5,
      9,
      9,
      4,
      9,
      99,
      3,
      9,
      1002,
      9,
      2,
      9,
      101,
      2,
      9,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      99,
      3,
      9,
      1002,
      9,
      4,
      9,
      101,
      3,
      9,
      9,
      4,
      9,
      99,
      3,
      9,
      1002,
      9,
      3,
      9,
      101,
      5,
      9,
      9,
      1002,
      9,
      3,
      9,
      101,
      3,
      9,
      9,
      1002,
      9,
      5,
      9,
      4,
      9,
      99,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      101,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      101,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      99,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      1,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      1,
      9,
      4,
      9,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      101,
      1,
      9,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      1,
      9,
      4,
      9,
      3,
      9,
      101,
      2,
      9,
      9,
      4,
      9,
      99,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      101,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      1,
      9,
      4,
      9,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      1,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      1,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      1,
      9,
      4,
      9,
      3,
      9,
      101,
      2,
      9,
      9,
      4,
      9,
      99,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      101,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      1,
      9,
      4,
      9,
      99,
      3,
      9,
      101,
      1,
      9,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      99
    ])
  ).toBe(437860);
});

test("Max thruster with feedback loop should be 139629729", () => {
  expect(
    maxThrusterWithFeedbackLoop([
      3,
      26,
      1001,
      26,
      -4,
      26,
      3,
      27,
      1002,
      27,
      2,
      27,
      1,
      27,
      26,
      27,
      4,
      27,
      1001,
      28,
      -1,
      28,
      1005,
      28,
      6,
      99,
      0,
      0,
      5
    ])
  ).toBe(139629729);
});

test("Max thruster with feedback loop should be 18216", () => {
  expect(
    maxThrusterWithFeedbackLoop([
      3,
      52,
      1001,
      52,
      -5,
      52,
      3,
      53,
      1,
      52,
      56,
      54,
      1007,
      54,
      5,
      55,
      1005,
      55,
      26,
      1001,
      54,
      -5,
      54,
      1105,
      1,
      12,
      1,
      53,
      54,
      53,
      1008,
      54,
      0,
      55,
      1001,
      55,
      1,
      55,
      2,
      53,
      55,
      53,
      4,
      53,
      1001,
      56,
      -1,
      56,
      1005,
      56,
      6,
      99,
      0,
      0,
      0,
      0,
      10
    ])
  ).toBe(18216);
});

test("Max thruster with feedback loop should be 49810599", () => {
  expect(
    maxThrusterWithFeedbackLoop([
      3,
      8,
      1001,
      8,
      10,
      8,
      105,
      1,
      0,
      0,
      21,
      46,
      55,
      72,
      85,
      110,
      191,
      272,
      353,
      434,
      99999,
      3,
      9,
      1002,
      9,
      5,
      9,
      1001,
      9,
      2,
      9,
      102,
      3,
      9,
      9,
      101,
      2,
      9,
      9,
      102,
      4,
      9,
      9,
      4,
      9,
      99,
      3,
      9,
      102,
      5,
      9,
      9,
      4,
      9,
      99,
      3,
      9,
      1002,
      9,
      2,
      9,
      101,
      2,
      9,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      99,
      3,
      9,
      1002,
      9,
      4,
      9,
      101,
      3,
      9,
      9,
      4,
      9,
      99,
      3,
      9,
      1002,
      9,
      3,
      9,
      101,
      5,
      9,
      9,
      1002,
      9,
      3,
      9,
      101,
      3,
      9,
      9,
      1002,
      9,
      5,
      9,
      4,
      9,
      99,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      101,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      101,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      99,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      1,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      1,
      9,
      4,
      9,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      101,
      1,
      9,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      1,
      9,
      4,
      9,
      3,
      9,
      101,
      2,
      9,
      9,
      4,
      9,
      99,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      101,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      1,
      9,
      4,
      9,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      1,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      1,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      1,
      9,
      4,
      9,
      3,
      9,
      101,
      2,
      9,
      9,
      4,
      9,
      99,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      101,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      1,
      9,
      4,
      9,
      99,
      3,
      9,
      101,
      1,
      9,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1002,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      102,
      2,
      9,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      3,
      9,
      1001,
      9,
      2,
      9,
      4,
      9,
      99
    ])
  ).toBe(49810599);
});

test("Should output the large number in the middle", () => {
  const { outputs } = run([104, 1125899906842624, 99], []);
  expect(outputs).toEqual([1125899906842624]);
});

test("Should output a 16-digit number", () => {
  const { outputs } = run([1102, 34915192, 34915192, 7, 4, 7, 99, 0], []);
  expect(outputs).toEqual([1219070632396864]);
});

test("Custom big calculation", () => {
  const { outputs } = run(
    [1102, 34915192123123123123, 34915192, 5, 104, 0, 99],
    []
  );
  expect(outputs).toEqual([1219070636695731425580679168]);
});

test("Takes no input and produces a copy of itself as output", () => {
  const { outputs, status } = run(
    [109, 1, 204, -1, 1001, 100, 1, 100, 1008, 100, 16, 101, 1006, 101, 0, 99],
    []
  );
  expect(outputs).toEqual([
    109,
    1,
    204,
    -1,
    1001,
    100,
    1,
    100,
    1008,
    100,
    16,
    101,
    1006,
    101,
    0,
    99
  ]);
  expect(status).toBe(1);
});

// BigInt shit
test("Day 9 1/2", () => {
  const { outputs, status } = run(
    [
      1102,
      34463338,
      34463338,
      63,
      1007,
      63,
      34463338,
      63,
      1005,
      63,
      53,
      1101,
      3,
      0,
      1000,
      109,
      988,
      209,
      12,
      9,
      1000,
      209,
      6,
      209,
      3,
      203,
      0,
      1008,
      1000,
      1,
      63,
      1005,
      63,
      65,
      1008,
      1000,
      2,
      63,
      1005,
      63,
      904,
      1008,
      1000,
      0,
      63,
      1005,
      63,
      58,
      4,
      25,
      104,
      0,
      99,
      4,
      0,
      104,
      0,
      99,
      4,
      17,
      104,
      0,
      99,
      0,
      0,
      1102,
      1,
      344,
      1023,
      1101,
      0,
      0,
      1020,
      1101,
      0,
      481,
      1024,
      1102,
      1,
      1,
      1021,
      1101,
      0,
      24,
      1005,
      1101,
      0,
      29,
      1018,
      1102,
      39,
      1,
      1019,
      1102,
      313,
      1,
      1028,
      1102,
      1,
      35,
      1009,
      1101,
      28,
      0,
      1001,
      1101,
      26,
      0,
      1013,
      1101,
      0,
      351,
      1022,
      1101,
      564,
      0,
      1027,
      1102,
      1,
      32,
      1011,
      1101,
      23,
      0,
      1006,
      1102,
      1,
      25,
      1015,
      1101,
      21,
      0,
      1003,
      1101,
      0,
      31,
      1014,
      1101,
      33,
      0,
      1004,
      1102,
      37,
      1,
      1000,
      1102,
      476,
      1,
      1025,
      1101,
      22,
      0,
      1007,
      1102,
      30,
      1,
      1012,
      1102,
      1,
      27,
      1017,
      1102,
      1,
      34,
      1002,
      1101,
      38,
      0,
      1008,
      1102,
      1,
      36,
      1010,
      1102,
      1,
      20,
      1016,
      1102,
      567,
      1,
      1026,
      1102,
      1,
      304,
      1029,
      109,
      -6,
      2108,
      35,
      8,
      63,
      1005,
      63,
      201,
      1001,
      64,
      1,
      64,
      1106,
      0,
      203,
      4,
      187,
      1002,
      64,
      2,
      64,
      109,
      28,
      21101,
      40,
      0,
      -9,
      1008,
      1013,
      38,
      63,
      1005,
      63,
      227,
      1001,
      64,
      1,
      64,
      1105,
      1,
      229,
      4,
      209,
      1002,
      64,
      2,
      64,
      109,
      -2,
      1205,
      1,
      243,
      4,
      235,
      1105,
      1,
      247,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      -12,
      2102,
      1,
      -5,
      63,
      1008,
      63,
      24,
      63,
      1005,
      63,
      271,
      1001,
      64,
      1,
      64,
      1105,
      1,
      273,
      4,
      253,
      1002,
      64,
      2,
      64,
      109,
      8,
      2108,
      22,
      -9,
      63,
      1005,
      63,
      295,
      4,
      279,
      1001,
      64,
      1,
      64,
      1106,
      0,
      295,
      1002,
      64,
      2,
      64,
      109,
      17,
      2106,
      0,
      -5,
      4,
      301,
      1001,
      64,
      1,
      64,
      1106,
      0,
      313,
      1002,
      64,
      2,
      64,
      109,
      -21,
      21107,
      41,
      40,
      7,
      1005,
      1019,
      333,
      1001,
      64,
      1,
      64,
      1105,
      1,
      335,
      4,
      319,
      1002,
      64,
      2,
      64,
      109,
      1,
      2105,
      1,
      10,
      1001,
      64,
      1,
      64,
      1105,
      1,
      353,
      4,
      341,
      1002,
      64,
      2,
      64,
      109,
      10,
      1206,
      -3,
      371,
      4,
      359,
      1001,
      64,
      1,
      64,
      1105,
      1,
      371,
      1002,
      64,
      2,
      64,
      109,
      -5,
      21108,
      42,
      42,
      -7,
      1005,
      1011,
      393,
      4,
      377,
      1001,
      64,
      1,
      64,
      1105,
      1,
      393,
      1002,
      64,
      2,
      64,
      109,
      -8,
      2101,
      0,
      -4,
      63,
      1008,
      63,
      23,
      63,
      1005,
      63,
      415,
      4,
      399,
      1105,
      1,
      419,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      13,
      21102,
      43,
      1,
      -6,
      1008,
      1017,
      43,
      63,
      1005,
      63,
      441,
      4,
      425,
      1106,
      0,
      445,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      -21,
      1207,
      0,
      33,
      63,
      1005,
      63,
      465,
      1001,
      64,
      1,
      64,
      1106,
      0,
      467,
      4,
      451,
      1002,
      64,
      2,
      64,
      109,
      19,
      2105,
      1,
      3,
      4,
      473,
      1106,
      0,
      485,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      1,
      21101,
      44,
      0,
      -7,
      1008,
      1015,
      44,
      63,
      1005,
      63,
      511,
      4,
      491,
      1001,
      64,
      1,
      64,
      1106,
      0,
      511,
      1002,
      64,
      2,
      64,
      109,
      2,
      1206,
      -3,
      527,
      1001,
      64,
      1,
      64,
      1105,
      1,
      529,
      4,
      517,
      1002,
      64,
      2,
      64,
      109,
      -8,
      1201,
      -7,
      0,
      63,
      1008,
      63,
      35,
      63,
      1005,
      63,
      555,
      4,
      535,
      1001,
      64,
      1,
      64,
      1105,
      1,
      555,
      1002,
      64,
      2,
      64,
      109,
      1,
      2106,
      0,
      10,
      1105,
      1,
      573,
      4,
      561,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      4,
      21107,
      45,
      46,
      -7,
      1005,
      1014,
      591,
      4,
      579,
      1106,
      0,
      595,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      -12,
      1208,
      -6,
      21,
      63,
      1005,
      63,
      617,
      4,
      601,
      1001,
      64,
      1,
      64,
      1105,
      1,
      617,
      1002,
      64,
      2,
      64,
      109,
      -11,
      1208,
      6,
      31,
      63,
      1005,
      63,
      637,
      1001,
      64,
      1,
      64,
      1106,
      0,
      639,
      4,
      623,
      1002,
      64,
      2,
      64,
      109,
      16,
      2101,
      0,
      -7,
      63,
      1008,
      63,
      20,
      63,
      1005,
      63,
      659,
      1105,
      1,
      665,
      4,
      645,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      3,
      2102,
      1,
      -9,
      63,
      1008,
      63,
      38,
      63,
      1005,
      63,
      691,
      4,
      671,
      1001,
      64,
      1,
      64,
      1106,
      0,
      691,
      1002,
      64,
      2,
      64,
      109,
      4,
      1205,
      -1,
      703,
      1105,
      1,
      709,
      4,
      697,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      -14,
      21108,
      46,
      45,
      7,
      1005,
      1014,
      729,
      1001,
      64,
      1,
      64,
      1105,
      1,
      731,
      4,
      715,
      1002,
      64,
      2,
      64,
      109,
      7,
      21102,
      47,
      1,
      0,
      1008,
      1014,
      45,
      63,
      1005,
      63,
      755,
      1001,
      64,
      1,
      64,
      1106,
      0,
      757,
      4,
      737,
      1002,
      64,
      2,
      64,
      109,
      -12,
      2107,
      34,
      7,
      63,
      1005,
      63,
      775,
      4,
      763,
      1105,
      1,
      779,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      -5,
      1207,
      6,
      22,
      63,
      1005,
      63,
      797,
      4,
      785,
      1106,
      0,
      801,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      12,
      1202,
      0,
      1,
      63,
      1008,
      63,
      35,
      63,
      1005,
      63,
      827,
      4,
      807,
      1001,
      64,
      1,
      64,
      1105,
      1,
      827,
      1002,
      64,
      2,
      64,
      109,
      -5,
      1202,
      0,
      1,
      63,
      1008,
      63,
      36,
      63,
      1005,
      63,
      851,
      1001,
      64,
      1,
      64,
      1105,
      1,
      853,
      4,
      833,
      1002,
      64,
      2,
      64,
      109,
      -2,
      1201,
      4,
      0,
      63,
      1008,
      63,
      20,
      63,
      1005,
      63,
      873,
      1105,
      1,
      879,
      4,
      859,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      2,
      2107,
      22,
      -1,
      63,
      1005,
      63,
      899,
      1001,
      64,
      1,
      64,
      1106,
      0,
      901,
      4,
      885,
      4,
      64,
      99,
      21102,
      1,
      27,
      1,
      21101,
      0,
      915,
      0,
      1105,
      1,
      922,
      21201,
      1,
      53897,
      1,
      204,
      1,
      99,
      109,
      3,
      1207,
      -2,
      3,
      63,
      1005,
      63,
      964,
      21201,
      -2,
      -1,
      1,
      21101,
      0,
      942,
      0,
      1106,
      0,
      922,
      21202,
      1,
      1,
      -1,
      21201,
      -2,
      -3,
      1,
      21101,
      0,
      957,
      0,
      1105,
      1,
      922,
      22201,
      1,
      -1,
      -2,
      1105,
      1,
      968,
      22102,
      1,
      -2,
      -2,
      109,
      -3,
      2105,
      1,
      0
    ],
    [1]
  );
  expect(outputs).toEqual([4080871669]);
  expect(status).toBe(1);
});

test("Day 9 2/2", () => {
  const { outputs, status } = run(
    [
      1102,
      34463338,
      34463338,
      63,
      1007,
      63,
      34463338,
      63,
      1005,
      63,
      53,
      1101,
      3,
      0,
      1000,
      109,
      988,
      209,
      12,
      9,
      1000,
      209,
      6,
      209,
      3,
      203,
      0,
      1008,
      1000,
      1,
      63,
      1005,
      63,
      65,
      1008,
      1000,
      2,
      63,
      1005,
      63,
      904,
      1008,
      1000,
      0,
      63,
      1005,
      63,
      58,
      4,
      25,
      104,
      0,
      99,
      4,
      0,
      104,
      0,
      99,
      4,
      17,
      104,
      0,
      99,
      0,
      0,
      1102,
      1,
      344,
      1023,
      1101,
      0,
      0,
      1020,
      1101,
      0,
      481,
      1024,
      1102,
      1,
      1,
      1021,
      1101,
      0,
      24,
      1005,
      1101,
      0,
      29,
      1018,
      1102,
      39,
      1,
      1019,
      1102,
      313,
      1,
      1028,
      1102,
      1,
      35,
      1009,
      1101,
      28,
      0,
      1001,
      1101,
      26,
      0,
      1013,
      1101,
      0,
      351,
      1022,
      1101,
      564,
      0,
      1027,
      1102,
      1,
      32,
      1011,
      1101,
      23,
      0,
      1006,
      1102,
      1,
      25,
      1015,
      1101,
      21,
      0,
      1003,
      1101,
      0,
      31,
      1014,
      1101,
      33,
      0,
      1004,
      1102,
      37,
      1,
      1000,
      1102,
      476,
      1,
      1025,
      1101,
      22,
      0,
      1007,
      1102,
      30,
      1,
      1012,
      1102,
      1,
      27,
      1017,
      1102,
      1,
      34,
      1002,
      1101,
      38,
      0,
      1008,
      1102,
      1,
      36,
      1010,
      1102,
      1,
      20,
      1016,
      1102,
      567,
      1,
      1026,
      1102,
      1,
      304,
      1029,
      109,
      -6,
      2108,
      35,
      8,
      63,
      1005,
      63,
      201,
      1001,
      64,
      1,
      64,
      1106,
      0,
      203,
      4,
      187,
      1002,
      64,
      2,
      64,
      109,
      28,
      21101,
      40,
      0,
      -9,
      1008,
      1013,
      38,
      63,
      1005,
      63,
      227,
      1001,
      64,
      1,
      64,
      1105,
      1,
      229,
      4,
      209,
      1002,
      64,
      2,
      64,
      109,
      -2,
      1205,
      1,
      243,
      4,
      235,
      1105,
      1,
      247,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      -12,
      2102,
      1,
      -5,
      63,
      1008,
      63,
      24,
      63,
      1005,
      63,
      271,
      1001,
      64,
      1,
      64,
      1105,
      1,
      273,
      4,
      253,
      1002,
      64,
      2,
      64,
      109,
      8,
      2108,
      22,
      -9,
      63,
      1005,
      63,
      295,
      4,
      279,
      1001,
      64,
      1,
      64,
      1106,
      0,
      295,
      1002,
      64,
      2,
      64,
      109,
      17,
      2106,
      0,
      -5,
      4,
      301,
      1001,
      64,
      1,
      64,
      1106,
      0,
      313,
      1002,
      64,
      2,
      64,
      109,
      -21,
      21107,
      41,
      40,
      7,
      1005,
      1019,
      333,
      1001,
      64,
      1,
      64,
      1105,
      1,
      335,
      4,
      319,
      1002,
      64,
      2,
      64,
      109,
      1,
      2105,
      1,
      10,
      1001,
      64,
      1,
      64,
      1105,
      1,
      353,
      4,
      341,
      1002,
      64,
      2,
      64,
      109,
      10,
      1206,
      -3,
      371,
      4,
      359,
      1001,
      64,
      1,
      64,
      1105,
      1,
      371,
      1002,
      64,
      2,
      64,
      109,
      -5,
      21108,
      42,
      42,
      -7,
      1005,
      1011,
      393,
      4,
      377,
      1001,
      64,
      1,
      64,
      1105,
      1,
      393,
      1002,
      64,
      2,
      64,
      109,
      -8,
      2101,
      0,
      -4,
      63,
      1008,
      63,
      23,
      63,
      1005,
      63,
      415,
      4,
      399,
      1105,
      1,
      419,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      13,
      21102,
      43,
      1,
      -6,
      1008,
      1017,
      43,
      63,
      1005,
      63,
      441,
      4,
      425,
      1106,
      0,
      445,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      -21,
      1207,
      0,
      33,
      63,
      1005,
      63,
      465,
      1001,
      64,
      1,
      64,
      1106,
      0,
      467,
      4,
      451,
      1002,
      64,
      2,
      64,
      109,
      19,
      2105,
      1,
      3,
      4,
      473,
      1106,
      0,
      485,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      1,
      21101,
      44,
      0,
      -7,
      1008,
      1015,
      44,
      63,
      1005,
      63,
      511,
      4,
      491,
      1001,
      64,
      1,
      64,
      1106,
      0,
      511,
      1002,
      64,
      2,
      64,
      109,
      2,
      1206,
      -3,
      527,
      1001,
      64,
      1,
      64,
      1105,
      1,
      529,
      4,
      517,
      1002,
      64,
      2,
      64,
      109,
      -8,
      1201,
      -7,
      0,
      63,
      1008,
      63,
      35,
      63,
      1005,
      63,
      555,
      4,
      535,
      1001,
      64,
      1,
      64,
      1105,
      1,
      555,
      1002,
      64,
      2,
      64,
      109,
      1,
      2106,
      0,
      10,
      1105,
      1,
      573,
      4,
      561,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      4,
      21107,
      45,
      46,
      -7,
      1005,
      1014,
      591,
      4,
      579,
      1106,
      0,
      595,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      -12,
      1208,
      -6,
      21,
      63,
      1005,
      63,
      617,
      4,
      601,
      1001,
      64,
      1,
      64,
      1105,
      1,
      617,
      1002,
      64,
      2,
      64,
      109,
      -11,
      1208,
      6,
      31,
      63,
      1005,
      63,
      637,
      1001,
      64,
      1,
      64,
      1106,
      0,
      639,
      4,
      623,
      1002,
      64,
      2,
      64,
      109,
      16,
      2101,
      0,
      -7,
      63,
      1008,
      63,
      20,
      63,
      1005,
      63,
      659,
      1105,
      1,
      665,
      4,
      645,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      3,
      2102,
      1,
      -9,
      63,
      1008,
      63,
      38,
      63,
      1005,
      63,
      691,
      4,
      671,
      1001,
      64,
      1,
      64,
      1106,
      0,
      691,
      1002,
      64,
      2,
      64,
      109,
      4,
      1205,
      -1,
      703,
      1105,
      1,
      709,
      4,
      697,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      -14,
      21108,
      46,
      45,
      7,
      1005,
      1014,
      729,
      1001,
      64,
      1,
      64,
      1105,
      1,
      731,
      4,
      715,
      1002,
      64,
      2,
      64,
      109,
      7,
      21102,
      47,
      1,
      0,
      1008,
      1014,
      45,
      63,
      1005,
      63,
      755,
      1001,
      64,
      1,
      64,
      1106,
      0,
      757,
      4,
      737,
      1002,
      64,
      2,
      64,
      109,
      -12,
      2107,
      34,
      7,
      63,
      1005,
      63,
      775,
      4,
      763,
      1105,
      1,
      779,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      -5,
      1207,
      6,
      22,
      63,
      1005,
      63,
      797,
      4,
      785,
      1106,
      0,
      801,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      12,
      1202,
      0,
      1,
      63,
      1008,
      63,
      35,
      63,
      1005,
      63,
      827,
      4,
      807,
      1001,
      64,
      1,
      64,
      1105,
      1,
      827,
      1002,
      64,
      2,
      64,
      109,
      -5,
      1202,
      0,
      1,
      63,
      1008,
      63,
      36,
      63,
      1005,
      63,
      851,
      1001,
      64,
      1,
      64,
      1105,
      1,
      853,
      4,
      833,
      1002,
      64,
      2,
      64,
      109,
      -2,
      1201,
      4,
      0,
      63,
      1008,
      63,
      20,
      63,
      1005,
      63,
      873,
      1105,
      1,
      879,
      4,
      859,
      1001,
      64,
      1,
      64,
      1002,
      64,
      2,
      64,
      109,
      2,
      2107,
      22,
      -1,
      63,
      1005,
      63,
      899,
      1001,
      64,
      1,
      64,
      1106,
      0,
      901,
      4,
      885,
      4,
      64,
      99,
      21102,
      1,
      27,
      1,
      21101,
      0,
      915,
      0,
      1105,
      1,
      922,
      21201,
      1,
      53897,
      1,
      204,
      1,
      99,
      109,
      3,
      1207,
      -2,
      3,
      63,
      1005,
      63,
      964,
      21201,
      -2,
      -1,
      1,
      21101,
      0,
      942,
      0,
      1106,
      0,
      922,
      21202,
      1,
      1,
      -1,
      21201,
      -2,
      -3,
      1,
      21101,
      0,
      957,
      0,
      1105,
      1,
      922,
      22201,
      1,
      -1,
      -2,
      1105,
      1,
      968,
      22102,
      1,
      -2,
      -2,
      109,
      -3,
      2105,
      1,
      0
    ],
    [2]
  );
  expect(outputs).toEqual([75202]);
  expect(status).toBe(1);
});
